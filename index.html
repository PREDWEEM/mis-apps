# ================================================================
# üåæ PREDWEEM ‚Äî Landing Page Streamlit (VERSI√ìN COMPATIBLE)
# Sin scripts, sin grid CSS, sin estilos globales
# ================================================================

import streamlit as st
from pathlib import Path

# ----------------------------
# CONFIG
# ----------------------------
st.set_page_config(
    page_title="PREDWEEM ‚Äì Predictive Weed Emergence Models",
    layout="wide"
)

# ----------------------------
# ESTILOS PERMITIDOS
# ----------------------------
st.markdown("""
<style>
.card {
    background: #ffffff;
    border: 1px solid #e0e6db;
    padding: 18px;
    border-radius: 14px;
    margin-bottom: 16px;
}
.btn {
    display: inline-block;
    background: #4CAF50;
    padding: 8px 14px;
    border-radius: 8px;
    color: white !important;
    text-decoration: none;
    font-weight: 600;
}
.btn-secondary {
    background: #2e5e2d !important;
}
.center {
    text-align:center;
}
h1, h2, h3 {
    color: #2e5e2d;
}
</style>
""", unsafe_allow_html=True)

# ----------------------------
# SELECTOR DE IDIOMA
# ----------------------------
if "lang" not in st.session_state:
    st.session_state.lang = "es"

col_es, col_en = st.columns(2)
if col_es.button("üá¶üá∑ Espa√±ol"):
    st.session_state.lang = "es"

if col_en.button("üá∫üá∏ English"):
    st.session_state.lang = "en"

LANG = st.session_state.lang

# ----------------------------
# TRADUCCIONES
# ----------------------------
T = {
    "es": {
        "title": "üìä PREDWEEM ‚Äì Modelos Predictivos de Emergencia",
        "subtitle": "Herramientas para la gesti√≥n sustentable en la regi√≥n pampeana",
        "intro": """
        Este portal re√∫ne modelos de emergencia desarrollados por la UNS y el INTA.
        Cargue datos meteorol√≥gicos o utilice los provistos autom√°ticamente
        para obtener emergencia diaria y emergencia acumulada (2025).
        """,
        "models": "Modelos disponibles",
        "guide": "Gu√≠a de uso",
        "team": "Equipo",
        "inst": "Instituciones",
        "contact": "Consultas o contacto",
        "open": "Abrir app"
    },
    "en": {
        "title": "üìä PREDWEEM ‚Äì Predictive Weed Emergence Models",
        "subtitle": "Decision tools for sustainable management in the Pampas region",
        "intro": """
        This portal contains weed emergence models developed by UNS & INTA.
        Upload weather data or use automatic sources to obtain daily and
        cumulative emergence (2025).
        """,
        "models": "Available models",
        "guide": "User guide",
        "team": "Team",
        "inst": "Institutions",
        "contact": "Contact",
        "open": "Open app"
    }
}

tr = lambda x: T[LANG][x]

# ================================================================
# PORTADA
# ================================================================
st.title(tr("title"))
st.subheader(tr("subtitle"))
st.write(tr("intro"))

st.image("austral.png", width=500)

# ================================================================
# MODELOS
# ================================================================
st.markdown(f"## {tr('models')}")

models = [
    ("Lolium sp. BORDENAVE‚Äì2025", "lolium.jpeg",
     "https://appemergenciapy-lscuxqt2j3sa9yjrwgyqnh.streamlit.app/"),
    ("Lolium sp. TRES ARROYOS‚Äì2025", "lolium.jpeg",
     "https://appemergenciapy-pfj3sr8shtoqcucopfmkat.streamlit.app/"),
    ("Avena fatua BORDENAVE‚Äì2025", "AVEFA.jpg",
     "https://appemergenciapy-mp6o4yjxbxctoekktcradc.streamlit.app/"),
    ("Hirshfeldia incana BORDENAVE‚Äì2025", "hirsin.png",
     "https://u2tod53cwpaeqmlqpmp2of.streamlit.app/"),
    ("Euphorbia davidii BORDENAVE‚Äì2025", "EUPHO.jpg",
     "https://appemergenciaapppy-gfda7txzhpsf2ahkcmv7h5.streamlit.app/"),
    ("Euphorbia davidii BAH√çA BLANCA‚Äì2025", "EUPHO.jpg",
     "https://appemergenciaapppy-ah6c82sgacq2d7z2i5uptl.streamlit.app/"),
    ("Euphorbia davidii OLAVARR√çA‚Äì2025", "EUPHO.jpg",
     "https://appemergenciaapppy-v3dns5cft6ws9p9jdhzepj.streamlit.app/")
]

# Render en filas de 3
for i in range(0, len(models), 3):
    cols = st.columns(3)
    for col, (name, img, url) in zip(cols, models[i:i+3]):
        with col:
            st.markdown('<div class="card">', unsafe_allow_html=True)
            st.image(img, use_column_width=True)
            st.markdown(f"**{name}**")
            st.markdown(f'<a class="btn" target="_blank" href="{url}">{tr("open")}</a>',
                        unsafe_allow_html=True)
            st.markdown('</div>', unsafe_allow_html=True)

# ================================================================
# GU√çA
# ================================================================
st.markdown(f"## {tr('guide')}")
st.write("""
1Ô∏è‚É£ **Cargar datos meteorol√≥gicos**  
Columnas: *Julian_days, TMAX, TMIN, Prec*  

2Ô∏è‚É£ **Ver resultados**  
Emergencia relativa (EMERREL) y Emergencia acumulada (EMERAC).  

3Ô∏è‚É£ **Descargar CSV**  
Exportaci√≥n completa lista para an√°lisis.
""")

st.image("pipa.png", width=450)
st.image("ac.png", width=450)

# ================================================================
# EQUIPO
# ================================================================
st.markdown(f"## {tr('team')}")

cols = st.columns(5)
imgs = [
    ("FOTO.jpg", "Ing. Agr. (Dr.) Guillermo R. Chantre"),
    ("Luis.JPG", "Ing. Agr. (Dr.) Luis M. Carretto"),
    ("ramon.jpeg", "Ing. Agr. Ram√≥n Gigon"),
    ("mario.jpeg", "Ing. Agr. Mario R. Vigna"),
    ("fede.jpg", "Ing. Agr. Federico Nu√±ez-Fr√©")
]

for col, (img, name) in zip(cols, imgs):
    col.image(img, caption=name)

# ================================================================
# INSTITUCIONES
# ================================================================
st.markdown(f"## {tr('inst')}")

cols = st.columns(4)
inst_imgs = ["descarga.jpg", "cerzos.jpg", "inta.png", "BCP_3-100.jpg"]
for col, img in zip(cols, inst_imgs):
    col.image(img)

# ================================================================
# CONTACTO
# ================================================================
st.markdown(f"## {tr('contact')}")

with st.form("contact_form"):
    name = st.text_input("Nombre / Name")
    email = st.text_input("Email")
    msg = st.text_area("Mensaje / Message")

    if st.form_submit_button("Enviar"):
        st.success("Mensaje enviado correctamente. ¬°Gracias!")

# ================================================================
# FOOTER
# ================================================================
st.markdown("""
<div class="center" style="margin-top:30px;color:#5b6b5b;">
¬© 2025 PREDWEEM ¬∑ Todos los derechos reservados.
</div>
""", unsafe_allow_html=True)

